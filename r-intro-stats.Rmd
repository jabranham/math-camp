---
title: "Intro to R - the Stats"
author: "J. Alexander Branham"
header-includes: 
   - \AtBeginPart{}
   - \AtBeginSection{}
   - \AtBeginSubsection{}
   - \AtBeginSubsubsection{}
   - \beamertemplatenavigationsymbolsempty
output: 
  beamer_presentation:
    incremental: true
fontsize: 10pt
---
```{r, include=FALSE}
library(ggplot2)
library(foreign)
```

# Basic statistics in R

# Reading in some data
* Let's read in some data from the internets:

```{r}
# Data is available on this course's github page:
# github.com/jabranham/math-camp
# Data from Herrera et al (forthcoming, AJPS)
my_data <- read.dta("data/herrera-data.dta")
my_data$fptp <- as.logical(my_data$fptp)
```

# What's in this data?
* unit of observation: country-year
* DV: turnout
* margin: margin between candidite w/ plurality and runner-up
* fptp: dummy for FPTP systems
* ppi: parliamentary power index 

# First step: Plot your data! 
```{r, warning=FALSE}
ggplot(my_data, aes(margin, turnout)) + geom_jitter()
```

# Maybe it looks different in FPTP systems?
```{r, warning=FALSE}
ggplot(my_data, aes(margin, turnout, color=fptp)) + 
  geom_jitter()
```

# Means by group
* To do this, we need to *subset* by fptp or not
* So we need one mean for fptp systems, 
* and another mean for non-fptp systems 
* Subsetting in R can be done several ways
* One way uses square brackets `[]` to subset row by column
* Another way uses `$` to subset by variable name
* We can combine these two types of subsetting too
* This is how base R thinks about it: there are other (better?) ways using the `dplyr` or `data.table` packages
    + Personally, I prefer `dplyr`

# The code
```{r}
mean_fptp <- with(my_data, mean(turnout[fptp==TRUE]))
mean_notfptp <- with(my_data, mean(turnout[fptp==FALSE]))
c(mean_fptp, mean_notfptp)
```

# Maybe we want uncertainty too...
```{r}
sd_fptp <- with(my_data, sd(turnout[fptp==TRUE]))
sd_notfptp <- sd(my_data$turnout[my_data$fptp==FALSE])
c(sd_fptp, sd_notfptp)
```

# There's a formal test
* Tests whether the mean is statistically different from each other
* LOTS more of this in Stats I

```{r}
t.test(my_data$turnout[my_data$fptp==TRUE],
  my_data$turnout[my_data$fptp==FALSE])
```
